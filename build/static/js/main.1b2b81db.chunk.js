(this["webpackJsonpviewer-server"]=this["webpackJsonpviewer-server"]||[]).push([[0],{31:function(e,t,n){e.exports=n(71)},36:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},69:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"GET_AGGREGATE_PROPERTIES",(function(){return g}));var i={};n.r(i),n.d(i,"getViewerProperties",(function(){return f}));var o=n(0),r=n.n(o),s=n(9),l=n.n(s),c=n(2),u=n(3),d=n(5),p=n(4),m=n(6),v=(n(36),n(8)),h=n(16),g="GET_AGGREGATE_PROPERTIES";function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:g,properties:e}}var y=n(12),b={properties:[]};var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.GET_AGGREGATE_PROPERTIES:var n=t.properties;return Object(v.a)(Object(v.a)({},e),{},{properties:n});default:return e}},O=Object(y.b)(E),k=O,N=n(30),w=n.n(N);var L,J,S,x={accessToken:{getaccesstoken:function(){return w.a.get("/token").then((function(e){return e.data})).catch((function(e){console.log(e)}))}}.getaccesstoken()},Y=0,R=null,j=!1,V=!0,T=null,A=!1,M="";function X(e){Autodesk.Viewing.Document.load(e,(function(e){var t=Autodesk.Viewing.Document.getSubItemsWithProperties(e.getRootItem(),{type:"geometry"},!0);t.length>0&&(t.forEach((function(e,t){})),L.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,C),L.addEventListener(Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,Object(h.debounce)((function(){console.log("selection change"),new Promise((function(e,t){var n=L.getSelection()[0];return 1!==L.getSelectionCount()?t("Invalid selection count"):new Promise((function(e){L.model.getProperties(n,(function(t){var n=t.properties.filter((function(e){return!e.hidden}));e(n)}))})).then((function(t){t=t.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{displayCategory:e.displayCategory||"Miscellaneous"})}));var n=Object(h.uniq)(t.map((function(e){return e.displayCategory}))).map((function(e){return{category:e,data:t.filter((function(t){return t.displayCategory===e}))}}));e(n)}))})).then((function(e){return O.dispatch(i.getViewerProperties(e))})).catch((function(){return O.dispatch(i.getViewerProperties([]))}))})),200),L.load(e.getViewablePath(t[0])))}),(function(e){console.log(e)}))}function C(e){var t=e.target;t.removeEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,C),t.fitToView(),t.setQualityLevel(!1,!1)}function z(){L.resize()}function W(e){e||j?(cancelAnimationFrame(J),j=!1,e&&(Y=0,L.explode(Y))):(P(),j=!0)}function P(e){R||(R=e);var t=e-R;R=e;var n=2e-4*(t||0);V?Y+=n:Y-=n,Y>1?(V=!1,Y=1):Y<0&&(V=!0,Y=0),L.explode(Y),J=window.requestAnimationFrame(P)}function F(e){T||(T=e);var t=e-T;T=e;var n=5e-4*(t||0),a=L.navigation.getWorldUpVector(),i=L.navigation.getPosition(),o=new THREE.Vector3(i.x,i.y,i.z),r=new THREE.Vector3(a.x,a.y,a.z),s=(new THREE.Matrix4).makeRotationAxis(r,n);o.applyMatrix4(s),L.navigation.setPosition(o),S=window.requestAnimationFrame(F)}function D(e){e||A?(cancelAnimationFrame(S),A=!1):(F(),A=!0)}var G={launchViewer:function(e,t,n){M=n,x.accessToken.then((function(n){var a={document:t,env:"AutodeskProduction",accessToken:n.access_token},i=document.getElementById(e);L=new Autodesk.Viewing.Viewer3D(i,{}),Autodesk.Viewing.Initializer(a,(function(){L.initialize(),L.prefs.tag("ignore-producer"),X(a.document)}))}))},loadDocument:X},Z=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){G.launchViewer("viewerDiv","urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6dmlld2VyLXJvY2tzLXJlYWN0L1JDJTIwQ2FyLmYzZA","0002")}},{key:"render",value:function(){return r.a.createElement("div",{className:"forge-viewer",id:"viewerDiv"})}}]),n}(o.Component),Q=n(7),H=n.n(Q),U=n(10),I=n.n(U),q=n(11),_=(n(65),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={collapsed:new Map},a}return Object(u.a)(n,[{key:"toggleProperty",value:function(e,t){t.preventDefault();var n=this.state.collapsed.get(e);this.setPropertyByIndex(e,!n)}},{key:"setPropertyByIndex",value:function(e,t){var n=this.state.collapsed;n.set(e,!0),this.setState({collapsed:n})}},{key:"componentDidMount",value:function(){1===this.props.properties.length&&this.setPropertyByIndex(0,!0)}},{key:"componentDidUpdate",value:function(e){var t=this.props.properties;e.properties!==t&&1===t.length&&this.setPropertyByIndex(0,!0)}},{key:"render",value:function(){var e=this,t=this.state.collapsed;return r.a.createElement("div",{className:"model-properties"},r.a.createElement("div",null,r.a.createElement("button",{className:"close-btn",onClick:this.props.onClose},r.a.createElement("i",{className:"fa fa-close"})),r.a.createElement("h3",null,"Properties"),this.props.properties.length?null:r.a.createElement("p",null,r.a.createElement("em",null,"Select a part to get started")),r.a.createElement("div",null,r.a.createElement("div",null,this.props.properties.map((function(n,a){return r.a.createElement("ul",{key:a},r.a.createElement("div",null,r.a.createElement("h4",null,r.a.createElement("a",{"data-toggle":"collapse",onClick:e.toggleProperty.bind(e,a)},n.category))),t.get(a)?r.a.createElement("div",null,r.a.createElement("ul",null,n.data.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("strong",null,e.displayName,":")," ",e.displayValue)})))):null)}))))))}}]),n}(o.Component)),B=Object(q.b)((function(e){return{properties:e.properties}}))(_),K=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).handlePropertiesClose=function(){e.setState({properties:!1})},e.state={fullscreen:!1,explode:!1,expMotion:!1,rotMotion:!1,resetState:!1,properties:!1,value:0},e.onFullscreen=e.onFullscreen.bind(Object(m.a)(e)),e.onExplode=e.onExplode.bind(Object(m.a)(e)),e.onExplodeAnimation=e.onExplodeAnimation.bind(Object(m.a)(e)),e.onRotateAnimation=e.onRotateAnimation.bind(Object(m.a)(e)),e.onResetState=e.onResetState.bind(Object(m.a)(e)),e.onOrientationChange=e.onOrientationChange.bind(Object(m.a)(e)),e.onPropertiesDisplay=e.onPropertiesDisplay.bind(Object(m.a)(e)),e.handleValueChange=e.handleValueChange.bind(Object(m.a)(e)),e.onSelectionChange=e.onSelectionChange.bind(Object(m.a)(e)),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("orientationchange",this.onOrientationChange)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("orientationchange",this.onOrientationChange)}},{key:"handleValueChange",value:function(e){var t;this.setState({value:e.target.value}),t=this.state.value/100,L.explode(t)}},{key:"onFullscreen",value:function(){var e=this;this.setState({fullscreen:!this.state.fullscreen},(function(){e.state.fullscreen?(I()(0,0,{ease:"inQuad",duration:300}),document.body.classList.add("fullscreen")):(document.body.classList.remove("fullscreen"),e.onResetState(),e.state.explode&&document.body.classList.remove("explode"),e.setState({fullscreen:!1,explode:!1,expMotion:!1,rotMotion:!1,resetState:!1,properties:!1,value:0})),setTimeout((function(){return z()}),300)}))}},{key:"onPropertiesDisplay",value:function(){var e=this;this.setState({properties:!this.state.properties},(function(){e.state.properties?document.body.classList.add("properties-show"):document.body.classList.remove("properties-show")}))}},{key:"onExplode",value:function(){var e=this;this.setState({explode:!this.state.explode},(function(){e.state.explode?document.body.classList.add("explode"):document.body.classList.remove("explode")}))}},{key:"onOrientationChange",value:function(){setTimeout((function(){return z()}),300)}},{key:"onExplodeAnimation",value:function(){var e=this;this.setState({expMotion:!this.state.expMotion},(function(){e.state.expMotion?(document.body.classList.add("explode-motion"),W()):(document.body.classList.remove("explode-motion"),W())}))}},{key:"onRotateAnimation",value:function(){var e=this;this.setState({rotMotion:!this.state.rotMotion},(function(){e.state.rotMotion?(document.body.classList.add("rotate-motion"),D()):(document.body.classList.remove("rotate-motion"),D())}))}},{key:"onResetState",value:function(){document.body.classList.remove("explode","explode-motion","rotate-motion"),this.setState({explode:!1,expMotion:!1,rotMotion:!1}),W(!0),D(!0),function(){var e="";switch(M){case"0001":e=JSON.parse('{"guid":"f075a989156eb711398","seedURN":"dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6dmlld2VyLXJvY2tzLXJlYWN0L1RpZV9GaWd0aGVyX1RveS5mM2Q","overrides":{"transformations":[]},"objectSet":[{"id":[],"isolated":[],"hidden":[],"explodeScale":0,"idType":"lmv"}],"viewport":{"name":"","eye":[145.8184640788883,93.51676504768685,-124.19785909734301],"target":[0,0,0.0000019073486328125],"up":[-0.3340034881841154,0.8986169812472194,0.28448056329910826],"worldUpVector":[0,1,0],"pivotPoint":[0,0,0.0000019073486328125],"distanceToOrbit":213.15139804714164,"aspectRatio":1.9929737351528332,"projection":"perspective","isOrthographic":false,"fieldOfView":61.92751520437556},"renderOptions":{"environment":"Rim Highlights","ambientOcclusion":{"enabled":false,"radius":10,"intensity":0.4},"toneMap":{"method":1,"exposure":-9,"lightMultiplier":-1e-20},"appearance":{"ghostHidden":true,"ambientShadow":false,"antiAliasing":true,"progressiveDisplay":true,"displayLines":true}},"cutplanes":[]}'),console.log("Restoring State for Tile:",M);break;case"0002":e=JSON.parse('{"guid":"f075a989156eb711397","seedURN":"dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6dmlld2VyLXJvY2tzLXJlYWN0L1JDJTIwQ2FyLmYzZA","overrides":{"transformations":[]},"objectSet":[{"id":[],"isolated":[],"hidden":[],"explodeScale":0,"idType":"lmv"}],"viewport":{"name":"","eye":[268.15901156738664,268.1590007567955,268.15899179720685],"target":[0,-0.0000019073486328125,-0.00000762939453125],"up":[0,1,0],"worldUpVector":[0,1,0],"pivotPoint":[0,-0.0000019073486328125,-0.00000762939453125],"distanceToOrbit":464.4650203923889,"aspectRatio":1.9409698157397892,"projection":"orthographic","isOrthographic":true,"orthographicHeight":464.46502039238896},"renderOptions":{"environment":"Rim Highlights","ambientOcclusion":{"enabled":false,"radius":10,"intensity":0.4},"toneMap":{"method":1,"exposure":-9,"lightMultiplier":-1e-20},"appearance":{"ghostHidden":true,"ambientShadow":false,"antiAliasing":true,"progressiveDisplay":true,"displayLines":true}},"cutplanes":[]}'),console.log("Restoring State for Tile:",M);break;case"0003":e=JSON.parse('{"guid":"f075a989156eb711399","seedURN":"dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6dmlld2VyLXJvY2tzLXJlYWN0L1RWUi00LUN5Y2wtZW5naW5lLmYzZA","overrides":{"transformations":[]},"objectSet":[{"id":[],"isolated":[],"hidden":[],"explodeScale":0,"idType":"lmv"}],"viewport":{"name":"","eye":[947.8717757705549,-947.8718237856292,947.8718169263327],"target":[0,0,0],"up":[0,1,0],"worldUpVector":[0,1,0],"pivotPoint":[0,0,0],"distanceToOrbit":1641.7621261779516,"aspectRatio":2.47171569916115,"projection":"orthographic","isOrthographic":true,"orthographicHeight":1641.7621261779514},"renderOptions":{"environment":"Rim Highlights","ambientOcclusion":{"enabled":false,"radius":10,"intensity":0.4},"toneMap":{"method":1,"exposure":-9,"lightMultiplier":-1e-20},"appearance":{"ghostHidden":true,"ambientShadow":false,"antiAliasing":true,"progressiveDisplay":true,"displayLines":true}},"cutplanes":[]}'),console.log("Restoring State for Tile:",M);break;case"0004":e=JSON.parse('{"guid":"f075a989156eb711400","seedURN":"dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6dmlld2VyLXJvY2tzLXJlYWN0L0hvdXNlLmR3Zng","overrides":{"transformations":[]},"objectSet":[{"id":[],"isolated":[],"hidden":[],"explodeScale":0,"idType":"lmv"}],"viewport":{"name":"","eye":[-163.8662266489145,0,101.51004011675508],"target":[0,0,0],"up":[0,1,0],"worldUpVector":[0,1,0],"pivotPoint":[0,0,0],"distanceToOrbit":192.76002822332916,"aspectRatio":2.0663910331477187,"projection":"perspective","isOrthographic":false,"fieldOfView":46.48761986856245},"renderOptions":{"environment":"Rim Highlights","ambientOcclusion":{"enabled":false,"radius":7.3109139716724485,"intensity":0.4},"toneMap":{"method":1,"exposure":-9,"lightMultiplier":-1e-20},"appearance":{"ghostHidden":true,"ambientShadow":false,"antiAliasing":true,"progressiveDisplay":true,"displayLines":true}},"cutplanes":[]}'),console.log("Restoring State for Tile:",M);break;case"0005":e=JSON.parse('{"guid":"f075a989156eb711401","seedURN":"dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6dmlld2VyLXJvY2tzLXJlYWN0L1VyYmFuJTIwSG91c2UlMjAtJTIwMjAxNS5ydnQ","overrides":{"transformations":[]},"objectSet":[{"id":[],"isolated":[],"hidden":[],"explodeScale":0,"idType":"lmv"}],"viewport":{"name":"","eye":[71.29038959242611,-71.98501662992042,67.07221817123673],"target":[0,0,-0.0000019073486328125],"up":[0,0,1],"worldUpVector":[0,0,1],"pivotPoint":[0,0,-0.0000019073486328125],"distanceToOrbit":121.50244842685274,"aspectRatio":0.4481514231771144,"projection":"orthographic","isOrthographic":true,"orthographicHeight":121.50244842685272},"renderOptions":{"environment":"Rim Highlights","ambientOcclusion":{"enabled":false,"radius":5.211787184833593,"intensity":0.4},"toneMap":{"method":1,"exposure":-9,"lightMultiplier":-1e-20},"appearance":{"ghostHidden":true,"ambientShadow":false,"antiAliasing":true,"progressiveDisplay":true,"displayLines":true}},"cutplanes":[]}'),console.log("Restoring State for Tile:",M);break;case"0006":e=JSON.parse('{"guid":"f075a989156eb711402","seedURN":"dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6dmlld2VyLXJvY2tzLXJlYWN0LzNkRmFjdG9yeS5kd2Y","overrides":{"transformations":[]},"objectSet":[{"id":[],"isolated":[],"hidden":[],"explodeScale":0,"idType":"lmv"}],"viewport":{"name":"","eye":[74.02664223103163,-62.794491882241786,57.115458464302066],"target":[0,-9.5367431640625e-7,-2.384185791015625e-7],"up":[0,0,1],"worldUpVector":[0,0,1],"pivotPoint":[0,-9.5367431640625e-7,-2.384185791015625e-7],"distanceToOrbit":112.62889271319895,"aspectRatio":1.8124895442487394,"projection":"perspective","isOrthographic":false,"fieldOfView":28.656461643949527},"renderOptions":{"environment":"Rim Highlights","ambientOcclusion":{"enabled":false,"radius":2.7574370487702686,"intensity":0.4},"toneMap":{"method":1,"exposure":-9,"lightMultiplier":-1e-20},"appearance":{"ghostHidden":true,"ambientShadow":false,"antiAliasing":true,"progressiveDisplay":true,"displayLines":true}},"cutplanes":[]}'),console.log("Restoring State for Tile:",M);break;default:console.log("Sorry, no model selected")}L.restoreState(e,!1,!1)}()}},{key:"onSelectionChange",value:function(){this.state.properties}},{key:"render",value:function(){var e=H()({fa:!0,"fa-expand":!this.state.fullscreen,"fa-compress":this.state.fullscreen}),t=H()({fa:!0,"fa-list":this.state.fullscreen}),n=H()({fa:!0,"fa-cubes":this.state.fullscreen}),a=H()({fa:!0,"fa-bomb":this.state.fullscreen}),i=H()({fa:!0,"fa-repeat":this.state.fullscreen}),o=H()({fa:!0,"fa-refresh":this.state.fullscreen}),s=H()({"properties-btn":!0,"btn--active":this.state.properties,"btn--deactive":!this.state.properties}),l=H()({"explode-btn":!0,"btn--active":this.state.explode,"btn--deactive":!this.state.explode}),c=H()({"explode-motion-btn":!0,"expbtn--active":this.state.expMotion,"expbtn--deactive":!this.state.expMotion}),u=H()({"rotate-motion-btn":!0,"rotbtn--active":this.state.rotMotion,"rotbtn--deactive":!this.state.rotMotion}),d=H()({"reset-btn":!0,"resetbtn--deactive":!this.state.rotMotion});return r.a.createElement("div",{className:"forge-jumbotron"},r.a.createElement(Z,null),r.a.createElement("div",{className:"forge-logo"},r.a.createElement("img",{src:"images/forge-logo.png",alt:"Autodesk Forge"})),r.a.createElement("div",{className:"container safari-only"},r.a.createElement("button",{className:"forge-btn",onClick:this.onFullscreen},r.a.createElement("i",{className:e})),r.a.createElement("button",{className:s,onClick:this.onPropertiesDisplay},r.a.createElement("i",{className:t})),r.a.createElement("button",{className:l,onClick:this.onExplode},r.a.createElement("i",{className:n})),r.a.createElement("button",{className:c,onClick:this.onExplodeAnimation},r.a.createElement("i",{className:a})),r.a.createElement("button",{className:u,onClick:this.onRotateAnimation},r.a.createElement("i",{className:i})),r.a.createElement("button",{className:d,onClick:this.onResetState},r.a.createElement("i",{className:o})),this.state.properties?r.a.createElement(B,{onClose:this.handlePropertiesClose}):null,r.a.createElement("input",{type:"range",className:"range-style",min:"0",max:"100",value:this.state.value,onChange:this.handleValueChange})))}}]),n}(o.Component),$=(n(66),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"forge-footer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-6"},r.a.createElement("a",{href:"https://github.com/jaimerosales/viewer-react-express-headless"},"View on GitHub ",r.a.createElement("i",{className:"fa fa-github"}))),r.a.createElement("div",{className:"col-xs-6 footer-copyright"},"\xa9 2016 Copyright Autodesk. All rights reserved."))))}}]),n}(o.Component)),ee=(n(67),[{img:"images/tie-fighter.png",title:"Fusion Tie Fighter",key:"0001",urn:"urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6dmlld2VyLXJvY2tzLXJlYWN0L1RpZV9GaWd0aGVyX1RveS5mM2Q"},{img:"images/fusion-rcar.png",title:"Fusion Race Car",key:"0002",urn:"urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6dmlld2VyLXJvY2tzLXJlYWN0L1JDJTIwQ2FyLmYzZA"},{img:"images/fusion-engine.png",title:"Fusion Engine",key:"0003",urn:"urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6dmlld2VyLXJvY2tzLXJlYWN0L1RWUi00LUN5Y2wtZW5naW5lLmYzZA"},{img:"images/revit-house.png",title:"Revit House",key:"0004",urn:"urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6dmlld2VyLXJvY2tzLXJlYWN0L0hvdXNlLmR3Zng"},{img:"images/urban-house.png",title:"Revit Urban House",key:"0005",urn:"urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6dmlld2VyLXJvY2tzLXJlYWN0L1VyYmFuJTIwSG91c2UlMjAtJTIwMjAxNS5ydnQ"},{img:"images/revit-factory.png",title:"Revit Factory",key:"0006",urn:"urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6dmlld2VyLXJvY2tzLXJlYWN0LzNkRmFjdG9yeS5kd2Y"}]),te=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"onTileSelect",value:function(e,t){t.preventDefault(),I()(0,0,{ease:"inQuad",duration:300}),setTimeout((function(){return G.launchViewer("viewerDiv",e.urn,e.key)}),300)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"forge-gallery"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},ee.map((function(t,n){return r.a.createElement("div",{className:"col-md-4 col-xs-6 tile",key:n},r.a.createElement("a",{href:"#",onClick:e.onTileSelect.bind(e,t)},r.a.createElement("img",{className:"tile-avatar",src:t.img,alt:t.title})),r.a.createElement("div",{className:"tile-title"},t.title))})))))}}]),n}(o.Component),ne=(n(68),n(69),n(70),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(K,null),r.a.createElement(te,null),r.a.createElement($,null))}}]),n}(o.Component));l.a.render(r.a.createElement(q.a,{store:k},r.a.createElement(ne,null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.1b2b81db.chunk.js.map